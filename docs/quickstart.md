# 快速入门指南

欢迎来到 Telegraf 配置管理系统！本指南将帮助您快速上手使用这个强大的配置管理工具。

## 🚀 5分钟快速启动

### 第一步：获取系统

```bash
# 克隆项目到本地
git clone <项目仓库地址>
cd telegraf_manager

# 运行一键安装脚本
chmod +x install.sh
./install.sh
```

### 第二步：启动系统

```bash
# 使用默认配置启动
./start.sh --browser

# 系统会自动：
# 1. 检查虚拟环境
# 2. 验证依赖包
# 3. 启动 Web 服务
# 4. 自动打开浏览器
```

### 第三步：登录系统

系统启动后，浏览器会自动打开 `http://localhost:5000`

**默认登录信息：**
- **用户名**: `admin`
- **密码**: `admin123`

**首次登录建议立即修改密码！**

## 📋 系统概览

登录后，您会看到系统的主界面，包含以下核心功能模块：

| 模块 | 图标 | 功能描述 |
|------|------|----------|
| 仪表盘 | 📊 | 系统总览和关键指标 |
| 数据源管理 | 🔌 | 管理输入和输出插件配置 |
| 配置文件管理 | 📝 | 创建和编辑 Telegraf 配置文件 |
| 数据点管理 | 🎯 | 管理监控数据点和指标 |
| 进程管理 | 🚀 | 监控和控制 Telegraf 进程 |
| 系统设置 | ⚙️ | 系统配置和管理 |

## 🔌 创建第一个数据源

### 步骤1：进入数据源管理

1. 点击左侧导航菜单的 **"数据源管理"**
2. 点击 **"添加数据源"** 按钮

### 步骤2：选择数据源类型

系统支持多种数据源类型：

| 类型 | 用途 | 示例 |
|------|------|------|
| **输入插件** | 数据采集 | CPU、内存、磁盘监控 |
| **输出插件** | 数据输出 | InfluxDB、HTTP、Kafka |

**示例：创建 CPU 监控输入源**

1. 选择 **"输入插件"**
2. 插件类型选择 **"cpu"**
3. 点击 **"使用模板"** 预填充配置

### 步骤3：配置数据源参数

```ini
# 基础配置
name = "cpu_monitor"
interval = "10s"

# CPU 特定配置
percpu = true
totalcpu = true
collect_cpu_time = false
```

### 步骤4：保存并测试

1. 点击 **"保存"** 按钮保存配置
2. 系统会自动验证配置格式
3. 保存成功后，数据源会出现在列表中

## 📝 生成第一个配置文件

### 步骤1：进入配置文件管理

1. 点击左侧导航菜单的 **"配置文件管理"**
2. 点击 **"生成配置文件"** 按钮

### 步骤2：选择数据源

1. 在弹出的对话框中，勾选刚刚创建的 CPU 监控数据源
2. 可以选择多个数据源进行组合
3. 点击 **"生成配置"**

### 步骤3：配置文件设置

```yaml
# 基本信息
文件名称: telegraf_cpu.conf
文件描述: CPU 监控配置
存储路径: /etc/telegraf/telegraf_cpu.conf
```

### 步骤4：生成和预览

1. 点击 **"生成配置文件"**
2. 系统会自动生成完整的 Telegraf 配置
3. 可以预览生成的配置文件内容

```toml
# 生成的配置文件示例
[agent]
  interval = "10s"
  flush_interval = "10s"

[[inputs.cpu]]
  name = "cpu_monitor"
  percpu = true
  totalcpu = true
```

## 🎯 查看数据点

### 步骤1：进入数据点管理

1. 点击左侧导航菜单的 **"数据点管理"**
2. 系统会显示从配置文件中自动提取的数据点

### 步骤2：理解数据点信息

数据点包含以下关键信息：

| 字段 | 说明 | 示例 |
|------|------|------|
| **原始名称** | 插件中的原始名称 | cpu_usage_idle |
| **标准化名称** | 系统标准化后的名称 | cpu_usage_idle |
| **数据类型** | 数据类型（float/int/string） | float |
| **单位** | 数据单位 | percent |
| **来源** | 数据来源（config_sync/manual） | config_sync |
| **配置文件** | 关联的配置文件 | telegraf_cpu.conf |

### 步骤3：数据点操作

- **查看详情**: 点击数据点行查看详细信息
- **编辑**: 修改数据点的描述、单位等信息
- **启用/禁用**: 控制数据点的激活状态
- **批量操作**: 选择多个数据点进行批量操作

## 🚀 启动监控进程

### 步骤1：进入进程管理

1. 点击左侧导航菜单的 **"进程管理"**
2. 系统会显示所有配置文件的进程状态

### 步骤2：启动进程

1. 找到刚刚创建的 `telegraf_cpu.conf`
2. 点击 **"启动"** 按钮
3. 系统会：
   - 验证配置文件语法
   - 启动 Telegraf 进程
   - 显示启动日志
   - 更新进程状态

### 步骤3：监控进程状态

启动后，您可以：

- **查看状态**: 进程运行状态（运行中/已停止/错误）
- **监控性能**: CPU 和内存使用情况
- **查看日志**: 实时进程日志和错误信息
- **控制进程**: 停止、重启进程

## 📊 查看监控结果

### 步骤1：验证数据收集

```bash
# 查看进程日志
tail -f log/telegraf_cpu.log

# 应该看到类似输出：
# 2025-01-19T10:00:00Z I! Starting Telegraf
# 2025-01-19T10:00:01Z I! Loaded inputs: cpu
# 2025-01-19T10:00:01Z I! Loaded outputs: [your-output]
# 2025-01-19T10:00:10Z D! [inputs.cpu] gathered metrics
```

### 步骤2：检查数据输出

根据您的输出插件配置，数据应该发送到相应的目标：

- **InfluxDB**: 使用 InfluxDB CLI 查询数据
- **HTTP**: 检查 HTTP 接收端的数据
- **文件**: 查看本地文件输出

## 🛠️ 常用操作

### 快速操作列表

| 操作 | 路径 | 快捷方式 |
|------|------|----------|
| 添加数据源 | 数据源管理 → 添加数据源 | Ctrl+N |
| 生成配置 | 配置文件管理 → 生成配置 | Ctrl+G |
| 启动进程 | 进程管理 → 启动 | 点击启动按钮 |
| 查看日志 | 进程管理 → 查看日志 | 双击进程行 |
| 系统状态 | 仪表盘 | Ctrl+D |

### 批量操作技巧

1. **批量选择数据源**: 使用复选框选择多个数据源，然后批量操作
2. **批量导入数据点**: 使用 Excel/CSV 文件批量导入数据点
3. **批量启动进程**: 选择多个配置文件，然后批量启动进程

## 🎯 下一步推荐

### 基础掌握后

1. **添加更多数据源**: 尝试添加内存、磁盘、网络等监控
2. **配置输出插件**: 设置 InfluxDB 或 HTTP 输出
3. **学习高级功能**: 版本控制、批量操作、模板管理

### 进阶使用

1. **配置模板管理**: 创建和使用自定义配置模板
2. **数据点批量导入**: 从 Excel 导入大量数据点
3. **系统监控设置**: 设置告警和通知机制
4. **生产环境部署**: 使用 Gunicorn + Nginx 部署

### 深入学习

1. **阅读完整文档**: [用户使用指南](user-guide.md)
2. **查看 API 文档**: [REST API 参考](api-reference.md)
3. **了解最佳实践**: [最佳实践指南](best-practices.md)
4. **参与社区**: GitHub Issues 和 Discussions

## 🚨 常见问题

### Q: 忘记管理员密码怎么办？

**A**: 使用以下命令重置密码：

```bash
# 激活虚拟环境
source .venv/bin/activate

# 重置密码
python -c "
from app import app, db, User
with app.app_context():
    admin = User.query.filter_by(username='admin').first()
    if admin:
        admin.set_password('new_password')
        db.session.commit()
        print('密码已重置为: new_password')
    else:
        print('管理员用户不存在')
"
```

### Q: 端口 5000 被占用怎么办？

**A**: 使用其他端口启动：

```bash
# 指定端口启动
./start.sh --port 8080 --browser

# 访问地址: http://localhost:8080
```

### Q: 如何备份数据库？

**A**: 使用内置的备份功能：

```bash
# 激活虚拟环境
source .venv/bin/activate

# 创建备份
python db_manager.py backup

# 备份文件保存在 database/backups/ 目录
```

### Q: Telegraf 进程启动失败怎么办？

**A**: 按以下步骤排查：

1. **检查配置文件语法**: 在配置文件管理页面验证配置
2. **查看错误日志**: 在进程管理页面查看详细日志
3. **检查 Telegraf 安装**: 确保 Telegraf 已正确安装
4. **检查端口占用**: 确认输出端口没有被占用

## 📞 获取帮助

如果在快速入门过程中遇到问题：

1. **查看日志**: `log/` 目录下的详细日志
2. **检查文档**: [故障排除指南](troubleshooting.md)
3. **提交 Issue**: [GitHub Issues](https://github.com/your-username/telegraf_manager/issues)
4. **社区讨论**: [GitHub Discussions](https://github.com/your-username/telegraf_manager/discussions)

---

**恭喜！您已经成功上手 Telegraf 配置管理系统！** 🎉